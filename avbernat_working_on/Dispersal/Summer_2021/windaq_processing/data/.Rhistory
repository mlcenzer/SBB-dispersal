#####re-randomize order of bugs who have already been through flight trials
setwd("~/Desktop/git_repositories/SBB-dispersal/avbernat_working_on/Dispersal/Summer_2021/windaq_processing/data/")
T1 = read.csv("flight_T1_data.csv", header=TRUE, sep=",", quote="", stringsAsFactors=FALSE)
masterlist<-read.csv("masterlist.csv", header=TRUE, sep=",", quote="", stringsAsFactors=FALSE)
trialdata = read.csv("flight_T1_data.csv", header=TRUE, sep=",", quote="", stringsAsFactors=FALSE)
live_data<-masterlist[masterlist$died!="Y" & masterlist$S.wing!="Y",]
nrow(masterlist)
nrow(live_data)
last_test_date_T1 = "8.26.21"
order_top<-sample(unique(live_data$ID[live_data$test_date!=last_test_date_T1]), size=40, replace=FALSE)
live_data$ID[live_data$test_date!=last_test_date_T1]
live_data$test_date
live_data
merge(masterlist, live_data, by="ID")
masterlist
merge(masterlist, live_data, by=c("ID", "population"))
test = merge(masterlist, live_data, by=c("ID", "population"))
test
masterlist
head(masterlist)
masterlist[,c(1,3,4,5,6,7)]
masterdata = masterlist[,c(1,3,4,5,6,7)]
head(masterdata)
head(masterlist)
head(masterdata)
test = merge(masterdata, live_data, by=c("ID", "population"))
test
head(test)
test = merge(masterdata, live_data, by=c("ID", "population", "sex"))
head(test)
masterdata = masterlist[,c(1,3,4,5,6,7)]
head(masterdata)
test = merge(masterdata, live_data, by=c("ID", "population", "sex"))
head(test)
test = merge(masterdata, live_data, by=c("ID", "population", "sex", "host_plant"))
head(test)
test = merge(masterdata, live_data, by=c("ID", "population", "sex", "host_plant", "site"))
head(test)
masterlist<-read.csv("masterlist.csv", header=TRUE, sep=",", quote="", stringsAsFactors=FALSE)
live_data<-masterlist[masterlist$died!="Y" & masterlist$S.wing!="Y",]
trialdata = read.csv("flight_T1_data.csv", header=TRUE, sep=",", quote="", stringsAsFactors=FALSE)
head(masterlist)
masterdata = live_data[,c(1,3,4,5,6,7)]
head(masterdata)
View(masterlist)
test = merge(masterdata, trialdata, by=c("ID", "population", "sex"))
head(test)
head(trialdata)
test = merge(masterdata, trialdata, by=c("ID", "population"))
head(test)
test = merge(masterdata, trialdata, by=c("ID"))
head(test)
test = merge(masterdata, trialdata, by=c("ID", "population"))
head(test)
head(live_data)
tail(test)
duplicated(test$ID)
test[duplicated(test$ID)]
test$ID[duplicated(test$ID)]
#####re-randomize order of bugs who have already been through flight trials
setwd("~/Desktop/git_repositories/SBB-dispersal/avbernat_working_on/Dispersal/Summer_2021/windaq_processing/data/")
masterlist<-read.csv("masterlist.csv", header=TRUE, sep=",", quote="", stringsAsFactors=FALSE)
live_data<-masterlist[masterlist$died!="Y" & masterlist$S.wing!="Y",]
trialdata = read.csv("flight_T1_data.csv", header=TRUE, sep=",", quote="", stringsAsFactors=FALSE)
masterdata = live_data[,c(1,3,4,5,6,7)]
head(masterdata)
head(live_data)
head(trialdata)
test = merge(masterdata, trialdata, by=c("ID", "population"))
head(test)
tail(test)
test$ID[duplicated(test$ID)]
# merge master data and trial data by ID and population
data = merge(masterdata, trialdata, by=c("ID", "population"))
# check for bugs tested twice in trial 1
data$ID[duplicated(data$ID)] # 102 tested twice in T1
last_test_date_T1 = "8.26.21"
order_top<-sample(unique(data$ID[data$test_date!=last_test_date_T1]), size=40, replace=FALSE)
order_top
bugs_left<-setdiff(data$ID, order_top)
bugs_left
order_bottom<-sample(bugs_left, size=length(bugs_left), replace=FALSE)
rand_order<-c(order_top, order_bottom)
rand_order
order<-unlist(sapply(1:length(rand_order), FUN=function(x) which(data$ID==rand_order[x])))
output<-data[order,c(1,2,8)] #several repeats because of paint falling off-->multiple measures; remove manually.
output
head(output)
output$ID[duplicated(output$ID)]
data
head(data)
head(output)
output<-data[order,c("ID","population","sex")]
head(data)
head(output)
live_data
head(live_data)
# read data
masterlist<-read.csv("masterlist.csv", header=TRUE, sep=",", quote="", stringsAsFactors=FALSE)
live_data<-masterlist[masterlist$died!="Y" & masterlist$S.wing!="Y",]
trialdata = read.csv("flight_T1_data.csv", header=TRUE, sep=",", quote="", stringsAsFactors=FALSE)
# extract only necessary columns
masterdata = live_data[,c("ID","date_died","sex","population","site","host_plant")]
head(masterdata)
head(live_data)
head(trialdata)
# merge master data and trial data by ID and population
data = merge(masterdata, trialdata, by=c("ID", "population"))
# check for bugs tested twice in trial 1
data$ID[duplicated(data$ID)] # 102 tested twice in T1
last_test_date_T1 = "8.26.21"
order_top<-sample(unique(data$ID[data$test_date!=last_test_date_T1]), size=40, replace=FALSE)
bugs_left<-setdiff(data$ID, order_top)
order_bottom<-sample(bugs_left, size=length(bugs_left), replace=FALSE)
rand_order<-c(order_top, order_bottom)
order<-unlist(sapply(1:length(rand_order), FUN=function(x) which(data$ID==rand_order[x])))
output<-data[order,c("ID","population","sex")]
head(output)
head(data)
output<-data[order,c("ID","population","sex","T..D.N.", "RH")]
head(data)
head(output)
data
head(data)
output<-data[order,c("ID","population","ID.1","T..D.N.", "RH")]
head(data)
head(output)
# remove repeats (because paint fallen off or tested twice in one trial)
output$ID[duplicated(output$ID)]
# remove repeats (because paint fallen off or tested twice in one trial)
output[duplicated(output)]
# remove repeats (because paint fallen off or tested twice in one trial)
output[duplicated(output$ID)]
# remove repeats (because paint fallen off or tested twice in one trial)
output[duplicated(output)]
# remove repeats (because paint fallen off or tested twice in one trial)
output[duplicated(output),]
# remove repeats (because paint fallen off or tested twice in one trial)
output[!duplicated(output),]
# remove repeats (because paint fallen off or tested twice in one trial)
TEST =output[!duplicated(output),]
# remove repeats (because paint fallen off or tested twice in one trial)
datasheet = output[!duplicated(output),]
head(datasheet)
head(datasheet)
# add columns
datasheet$`died?` = NA
datasheet$`died?`
# add columns
datasheet$`died?` = ""
head(datasheet)
datasheet$chamber = ""
head(datasheet)
datasheet$set_number = ""
head(datasheet)
datasheet$test_date = ""
head(datasheet)
datasheet$time_start = ""
datasheet$time_end = ""
datasheet$`T (D/N)` = '28/28'
datasheet$RH = 70
output<-data[order,c("ID","population","ID.1")]
head(data)
head(output)
# remove repeats (because paint fallen off or tested twice in one trial)
datasheet = output[!duplicated(output),]
head(datasheet)
# add columns
datasheet$`died?` = ""
datasheet$chamber = ""
datasheet$set_number = ""
datasheet$test_date = ""
datasheet$time_start = ""
datasheet$time_end = ""
datasheet$`T (D/N)` = '28/28'
datasheet$RH = 70
head(datasheet)
output<-data[order,c("ID","population")]
head(data)
head(output)
# remove repeats (because paint fallen off or tested twice in one trial)
datasheet = output[!duplicated(output),]
head(datasheet)
# add columns
datasheet$`died?` = ""
datasheet$chamber = ""
datasheet$set_number = ""
datasheet$test_date = ""
datasheet$time_start = ""
datasheet$time_end = ""
datasheet$`T (D/N)` = '28/28'
datasheet$RH = 70
datashet$flew = ""
datasheet$flew = ""
datasheet$flight_type = ""
datasheet$`ID ` = datasheet$ID
datasheet$mass = ""
datasheet$EWM = ""
datasheet$NOTES = ""
head(datasheet)
c(1,3:9,2,11:length(datasheet))
column_order = c(1,3:9,2,11:length(datasheet))
datasheet <- datasheet[, column_order]
datasheet
head(datasheet)
order_bottom<-sample(bugs_left, size=length(bugs_left), replace=FALSE)
rand_order<-c(order_top, order_bottom)
order<-unlist(sapply(1:length(rand_order), FUN=function(x) which(data$ID==rand_order[x])))
output<-data[order,c("ID","population")]
head(data)
head(output)
# remove repeats (because paint fallen off or tested twice in one trial)
datasheet = output[!duplicated(output),]
head(datasheet)
# add columns
datasheet$`died?` = ""
datasheet$chamber = ""
datasheet$set_number = ""
datasheet$test_date = ""
datasheet$time_start = ""
datasheet$time_end = ""
datasheet$`T (D/N)` = '28/28'
datasheet$RH = 70
datasheet$flew = ""
datasheet$flight_type = ""
datasheet$`ID ` = datasheet$ID
datasheet$mass = ""
datasheet$EWM = ""
datasheet$NOTES = ""
head(datasheet)
column_order = c(1,3:9,2,11:length(datasheet))
datasheet <- datasheet[, column_order]
head(datasheet)
column_order = c(1,3:10,2,11:length(datasheet))
datasheet <- datasheet[, column_order]
head(datasheet)
head(datasheet)
datasheetT2 <- datasheet[, column_order]
order<-unlist(sapply(1:length(rand_order), FUN=function(x) which(data$ID==rand_order[x])))
output<-data[order,c("ID","population")]
head(data)
head(output)
# remove repeats (because paint fallen off or tested twice in one trial)
datasheet = output[!duplicated(output),]
order_bottom<-sample(bugs_left, size=length(bugs_left), replace=FALSE)
rand_order<-c(order_top, order_bottom)
order<-unlist(sapply(1:length(rand_order), FUN=function(x) which(data$ID==rand_order[x])))
output<-data[order,c("ID","population")]
head(data)
head(output)
# remove repeats (because paint fallen off or tested twice in one trial)
datasheet = output[!duplicated(output),]
head(datasheet)
# add columns
datasheet$`died?` = ""
datasheet$chamber = ""
datasheet$set_number = ""
datasheet$test_date = ""
datasheet$time_start = ""
datasheet$time_end = ""
datasheet$`T (D/N)` = '28/28'
datasheet$RH = 70
datasheet$flew = ""
datasheet$flight_type = ""
datasheet$`ID ` = datasheet$ID
datasheet$mass = ""
datasheet$EWM = ""
datasheet$NOTES = ""
head(datasheet)
column_order = c(1,3:9,2,11:length(datasheet))
datasheetT2 <- datasheet[, column_order]
head(datasheetT2)
# save and open in excel
write.csv(output, "datasheets/flight_T2_datasheet.csv")
head(datasheet)
column_order = c(1,3:10,2,11:length(datasheet))
datasheetT2 <- datasheet[, column_order]
head(datasheetT2)
# save and open in excel
write.csv(datasheetT2, "datasheets/flight_T2_datasheet.csv")
#####re-randomize order of bugs who have already been through flight trials
setwd("~/Desktop/git_repositories/SBB-dispersal/avbernat_working_on/Dispersal/Summer_2021/windaq_processing/data/")
# save and open in excel
write.csv(datasheetT2, "./datasheets/flight_T2_datasheet.csv")
# save and open in excel
write.csv(datasheetT2, "../datasheets/flight_T2_datasheet.csv")
